# ALIGNMENT: U盾/CA证书到期提醒系统

## 1. 项目背景与目标
用户需要一个在线管理系统，用于记录各类U盾、投标网站CA证书的到期时间，并提供自动化的多渠道提醒服务。核心诉求是**功能实用**且**免费部署**。

## 2. 核心需求分析

### 2.1 功能需求
1.  **资产管理 (CRUD)**:
    - 输入：名称、用途、到期日期、续费方式、备注。
    - 列表展示：按到期时间排序，高亮即将到期的设备。
    - 编辑/删除功能。
2.  **自动化提醒**:
    - 系统需每日自动检查即将到期的资产。
    - 支持提前 N 天通知（如提前 30天、7天、1天）。
3.  **多渠道通知**:
    - **邮件**: 必须支持。
    - **微信**: 必须支持（个人微信）。
    - **手机短信**: 必须支持（但受限于"免费"约束，需讨论可行性）。
4.  **用户系统**:
    - 需要简单的登录功能，保护个人资产数据。

### 2.2 非功能需求 (约束)
1.  **零成本部署**: 服务器、数据库、域名、通知服务均需使用免费方案。
2.  **在线访问**: Web 端应用，适配移动端浏览（响应式）。

## 3. 技术架构与选型 (针对"免费部署"的决策)

为了满足“永久免费”且“稳定”的需求，推荐以下 Serverless 架构：

| 组件 | 选型 | 理由 |
| :--- | :--- | :--- |
| **前端框架** | **React + Vite + Tailwind CSS** | 开发效率高，生态好，Vercel 完美支持。 |
| **托管平台** | **Vercel** | 永久免费托管静态网站，全球 CDN，支持 Git 自动化部署。 |
| **后端/数据库** | **Supabase** | 提供免费的 PostgreSQL 数据库、身份验证 (Auth) 和 API。 |
| **定时任务** | **Supabase Edge Functions + pg_cron** | Supabase 支持数据库级别的定时任务，无需一直开着的服务器。 |
| **邮件服务** | **Resend** | 每月免费 3000 封邮件，足够个人使用。 |
| **微信通知** | **PushPlus (推送加)** | 免费的微信消息推送服务，通过 API 调用即可推送到个人微信。 |
| **短信服务** | **(待定)** | **风险提示**: 目前市面上**没有**稳定且免费的个人短信 API。大部分都需要企业资质且按条收费。建议用“微信推送”或“邮件转短信”替代，或作为保留付费功能。 |

## 4. 待确认问题 (Q&A)

1.  **关于短信功能的决策**:
    - *现状*: 免费短信 API 极少，且容易失效。
    - *建议*: 优先实现 **邮件 + 微信**。短信作为“可选配置”，如果用户有阿里云/腾讯云短信 Key 可以填入，否则默认隐藏。
    - *决策*: 是否同意优先实现邮件和微信，短信作为备选？

2.  **关于部署方式**:
    - 既然要求免费，我们将配置 GitHub Action 或手动部署到 Vercel。
    - 用户需要注册 GitHub、Vercel 和 Supabase 账号（都是免费的）。

## 5. 下一步计划 (Architecture)
一旦对齐上述方案，我们将进入架构设计阶段：
1.  设计数据库 Schema (Asset 表, NotificationLog 表)。
2.  设计前端 UI 原型 (Dashboard, Form)。
3.  设计定时任务逻辑 (Cron Job)。
